<import src="../../templates/ai-chat-template.wxml" />
<navigation-bar title="é¥®é£Ÿè®°å½• ðŸš" back="{{false}}" color="white" background="linear-gradient(135deg, #FFB6C1, #FFD700)"></navigation-bar>

<view class="container">
  <view class="bear-calendar">
  <!-- æ ‡é¢˜æ  -->
  <view class="bear-calendar-titlebar">
    <view class="bear-arrow left" bindtap="prevMonth">
  <view class="arrow-left"></view>
</view>
<text class="bear-calendar-month">{{year}}å¹´{{month}}æœˆ</text>
<view class="bear-arrow right" bindtap="nextMonth">
  <view class="arrow-right"></view>
</view>
  </view>

  <!-- æ˜ŸæœŸè¡Œ -->
  <view class="bear-calendar-weekdays">
    <view wx:for="{{weekdays}}" wx:key="id" class="bear-weekday-item">
      {{item}}
    </view>
  </view>

  <!-- æ—¥æœŸéƒ¨åˆ† -->
  <view class="bear-calendar-days">
    <block wx:for="{{calendarData}}" wx:key="index">
      <view 
        class="bear-week" 
        wx:if="{{calendarExpanded || index === currentWeekIndex}}"
      >
        <!-- å±•å¼€æ˜¾ç¤ºæ‰€æœ‰å‘¨ï¼Œé»˜è®¤æ˜¾ç¤ºå½“å¤©æ‰€åœ¨çš„å‘¨ -->
        <block wx:for="{{item}}" wx:key="index">
          <block wx:if="{{item === 0}}">
            <view class="bear-day empty"></view>
          </block>
          <block wx:else>
            <view
              class="bear-day {{item === selectedDay ? 'selected' : ''}} {{today && item === day ? 'today' : ''}}"
              bindtap="selectDate"
              data-value="{{item}}"
            >
              <text>{{item}}</text>
            </view>
          </block>
        </block>
      </view>
    </block>
  </view>

  <!-- å±•å¼€/æ”¶èµ·æŒ‰é’® -->
<view class="calendar-toggle" bindtap="toggleCalendar">
  <view wx:if="{{calendarExpanded}}">
    <icon type="success_no_circle" size="30" class="toggle-icon expanded"></icon>
  </view>
  <view wx:else>
    <icon type="success" size="30" class="toggle-icon collapsed"></icon>
  </view>
</view>
</view>
</view>
  <!-- é¡µé¢å†…å®¹ -->
  <template is="ai-chat-button" />
  <template is="ai-chat-modal" />